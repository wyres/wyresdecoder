var wyresdecoder=function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";function n(e){return r=s(e),t={},r.forEach((function(e){var r=e.v;switch(e.t){case"00":var n=parseInt("0x"+r.substring(0,2)),a=parseInt("0x"+r.substring(2,4)),s=parseInt("0x"+r.substring(6,8)+r.substring(4,6)),d=parseInt(""+s),v=u(r,8),h=[{hash:3073671017,label:"wbasev2_sobat_eu868_filleBLE_dev"},{hash:3647927579,label:"wbasev2_tomat_eu868_filleGPSBLE_dev"},{hash:883332667,label:"wbasev2_sobat_eu868_filleBLE_prod"},{hash:4067916045,label:"wbasev2_tomat_eu868_filleBLE_dev"},{hash:1877577695,label:"wbasev2_tomat_eu868_filleBLE_prod"},{hash:970323733,label:"wbasev2_tomat_eu868_filleGPSBLE_prod"},{hash:729649863,label:"wbasev2_topas_eu868_filleBLE_dev"},{hash:2834278809,label:"wbasev2_topas_eu868_filleBLE_prod"}].find(e=>e.hash===v);t.version=p({version:n+"."+a,build:+d,product:h?h.label:v});break;case"06":n=r.substring(0,2),a=r.substring(2,4),t.light=p(parseInt(""+parseInt("0x"+a+n)));break;case"07":n=r.substring(0,2),a=r.substring(2,4),s=r.substring(4,6),t.battery=p(parseInt(""+parseInt("0x"+s+a+n))/1e3);break;case"12":if(0===r.length){t.bleCurrent=g("no iBeacon seen");break}t.bleCurrent=p(b(r));break;case"15":if(0===r.length){t.bleCurrent=g("no iBeacon seen");break}t.bleCount=p(c(r));break;case"0f":var k="unknown";switch(n=parseInt(r.substring(0,2))){case 0:k="UpRight";break;case 1:k="Inverted";break;case 2:k="Flat Back";break;case 3:k="Flat Face";break;case 4:k="Unknown";break;default:k="Unknown: "+n}a=r.substring(2,4),s=r.substring(4,6);var _=r.substring(6,8);t.orientation=p({x:i(a),y:i(s),z:i(_),general_orientation:k});break;case"03":n=r.substring(0,2),a=r.substring(2,4),t.temperature=p(parseInt("0x"+a+n)/100);break;case"04":t.pressure=p(u(r,0)/100);break;case"13":t.bleEnter=p([]);for(var I=0;I<r.length/10;I++){var m=r.substring(0+10*I,2+10*I),y=r.substring(2+10*I,4+10*I),x=r.substring(4+10*I,6+10*I),w=r.substring(6+10*I,8+10*I),S=r.substring(8+10*I,10+10*I);t.bleEnter.data.push({major:"00"+m,minor:x+y,rssi:i(w),xB:S})}break;case"14":for(t.bleExit=p([]),I=0;I<r.length/6;I++)m=r.substring(0+6*I,2+6*I),y=r.substring(2+6*I,4+6*I),x=r.substring(4+6*I,6+6*I),t.bleExit.data.push({major:"00"+m,minor:x+y});break;case"0a":break;case"0c":t.move=p(l(r));break;case"0d":t.fall=p(l(r));break;case"0e":t.shock=p(l(r));break;case"01":t.uptime=p(l(r));break;case"0b":var L=r.substring(16,18),B=r.substring(18,20),E=moment(1e3*u(r,0)),j=moment(1e3*u(r,8));t.button=p({from:E.toISOString(),to:j.toISOString(),btn:L,pressType:B});break;case"16":if(0===r.length){t.gps=g("check done, no FIX");break}var O=convertRawGPS(u(r,0)),P=convertRawGPS(u(r,8)),F=u(r,16)/10,C=u(r,24)/10,U=u(r,32),G=parseInt("0x"+r.substring(40,42));t.gps=p({lat:parseFloat(O).toFixed(5),lon:parseFloat(P).toFixed(5),alt:F,precision:C,timestamp:U,nsats:G});break;case"19":if(0===r.length){t.presence=g("no presence iBeacon seen");break}n=r.substring(0,2),a=r.substring(2,4);var M="";for(I=(s=r.substring(2,r.length)).length/4-1;I>=0;I--)M+=s[4*I+0],M+=s[4*I+1],M+=s[4*I+2],M+=s[4*I+3];var V="81"+n+"-00",R=o(M);for(t.presence=p([]),I=R.length-1;I>=0;I--)if(1===parseInt(R[I])){var T=R.length-1-I;t.presence.data.push(V+T.toString(16).padStart(2,"0"))}break;case"dlId":e.v>15||e.v<0?t.dlId=f("Bad DLID ["+r+"]"):t.dlId=p(r);break;case"payloadVersion":1!==e.v?t.payloadVersion=f("Bad Payload version ["+r+"]"):t.payloadVersion=p(r);break;case"willListen":0!==e.v?t.willListen=p(!0):t.willListen=p(!1);break;case"payloadLength":t.payloadLengthError=f(r);break;default:console.log("Unknown key [",e.t,"]",r)}})),{"data:":t};var r,t}function a(e){let r="";return e.forEach((function(e){r+=("0"+Number(e).toString(16)).slice(-2).toUpperCase()})),r}t.r(r),t.d(r,"parseAndInterprete",(function(){return n})),t.d(r,"convertFromArray",(function(){return a}));var s=function(e){var r=[],t=parseInt("0x"+e[0]+e[1]);r.push({t:"dlId",l:0,v:15&t}),r.push({t:"payloadVersion",l:0,v:(48&t)>>4}),r.push({t:"willListen",l:0,v:64&t}),parseInt("0x"+e[2]+e[3])!==e.length/2-2&&r.push({t:"payloadLength",l:-1,v:"payload length incoherence detected"});for(var n=4;n<e.length;){var a,s,o="";a=e[n]+e[n+1]+"",s=parseInt("0x"+e[n+2]+e[n+3]);for(var i=n+4;i<n+4+2*s;i+=2)o+=""+e[i]+e[i+1];r.push({t:a,l:s,v:o}),n=n+4+2*s}return r};let o=function(e){return parseInt(e,16).toString(2).padStart(8,"0")},i=function(e){let r=parseInt("0x"+e);return r>128?r-256:r},u=function(e,r){var t=e.substring(r,r+2),n=e.substring(r+2,r+4),a=e.substring(r+4,r+6),s=e.substring(r+6,r+8);return parseInt("0x"+s+a+n+t)},l=function(e){return moment(1e3*u(e,0)).toISOString()},b=function(e){for(var r=((e="00"+e).length-2)/10,t=[],n=0;n<r;n++){let r=e.substr(0+10*n,4),a=e.substr(6+10*n,2)+e.substr(4+10*n,2),s=parseInt(""+parseInt("0x"+e.substr(8+10*n,2)))-254;t.push({major:r,minor:a,rssi:s})}return t},c=function(e){for(var r=[],t=e.length/4,n=0;n<t;n++)r.push({type:e[4*n]+e[4*n+1],count:parseInt("0x"+e[4*n+2]+e[4*n+3])});return r},p=function(e){return{data:e}},f=function(e){return{error:e}},g=function(e){return{warn:e}}}]);